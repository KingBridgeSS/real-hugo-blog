<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Posts on BRIdGE&#39;s blog</title>
    <link>https://blog.kingbridge.one/posts/</link>
    <description>Recent content in Posts on BRIdGE&#39;s blog</description>
    <generator>Hugo</generator>
    <language>en</language>
    <lastBuildDate>Mon, 04 Nov 2024 00:00:00 +0000</lastBuildDate>
    <atom:link href="https://blog.kingbridge.one/posts/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>åœ¨æ ¡å›­ç½‘é€šè¿‡PVE&#43;OpenWRT NATæ¥å…¥æœ‰çº¿ç½‘</title>
      <link>https://blog.kingbridge.one/posts/2024_fall/pveandnat/</link>
      <pubDate>Mon, 04 Nov 2024 00:00:00 +0000</pubDate>
      <guid>https://blog.kingbridge.one/posts/2024_fall/pveandnat/</guid>
      <description>&lt;p&gt;æ³¨ï¼šæœ¬ç¯‡ä¸»è¦è®²è¿°ç½‘ç»œé…ç½®ï¼ŒPVEè£…æœºç­‰ç»†èŠ‚æ‡’å¾—å†™äº†ï¼ˆ&lt;/p&gt;&#xA;&lt;p&gt;åºŸè¯ï¼šæ—¶éš”ä¸€ä¸‡å¹´åä¸€ä¸ªå«bridgeçš„fwç»ˆäºæƒ³èµ·äº†ä»–çš„åšå®¢ï¼Œå†³å®šæ›´æ–°ã€‚åŸæ¥ç”¨çš„åšå®¢æ˜¯xlogï¼Œä½†æ˜¯å‘ç°ä¸»é¡µæ–‡ç« å¡ç‰‡é£˜å¿½ä¸å®šã€‚githubä¸Šæœ‰&lt;a href=&#34;https://github.com/Crossbell-Box/xLog/issues/2173&#34;&gt;å¾ˆå¤šç±»ä¼¼çš„issues&lt;/a&gt;(æ–‡ç« æœ«å°¾æœ‰åè½¬)ã€‚æ­£å€¼mac-miniå‘å”®ä¹‹é™…ï¼Œå‘¨å›´æœ‹å‹å¯¹å°ä¸»æœºçš„çƒ­æƒ…ä¼¼ä¹æé«˜äº†èµ·æ¥ã€‚bridgeçœ‹ç€è„šä¸‹åƒç°çš„å°ä¸»æœºï¼Œå†³å®šç”¨å®ƒé…ä¸€ä¸ªPVEç”¨æ¥è·‘åšå®¢ã€‚&lt;/p&gt;&#xA;&lt;p&gt;ä½†æ˜¯æ¥å…¥å­¦æ ¡çš„æœ‰çº¿ç½‘æœ‰ä¸ªé—®é¢˜ï¼šæ¥å…¥çš„äº¤æ¢æœºæœ‰ä¸€ä¸ªIP-MACè¡¨ï¼Œéœ€è¦ç”³è¯·ç™»è®°ï¼Œå¦åˆ™ä¸åœ¨è¡¨é‡Œä¼šè¢«æ‹¦æˆªã€‚æ‰€ä»¥Plan Aï¼šæ‰€æœ‰è™šæ‹Ÿæœºå…¨éƒ¨æ¡¥æ¥ï¼Œæ¯å¼€ä¸€ä¸ªè™šæ‹Ÿæœºéƒ½æ‰¾ç®¡ç†å‘˜ç™»è®°ä¸€éã€‚ä¸ºäº†é˜²æ­¢ç®¡ç†å‘˜è¯´&amp;quot;how old are you&amp;quot;ï¼Œå°±æœ‰äº†Plan Bã€‚&lt;/p&gt;&#xA;&lt;p&gt;äºæ˜¯ä¸ºäº†è¿™ä¸ªåšå®¢ï¼ŒbridgeåŒ…äº†è¿™æ ·ä¸€ç›˜é¥ºå­ï¼š&lt;/p&gt;&#xA;&lt;h1 id=&#34;ç½‘ç»œæ‹“æ‰‘å›¾&#34;&gt;ç½‘ç»œæ‹“æ‰‘å›¾&lt;/h1&gt;&#xA;&lt;p&gt;&lt;img src=&#34;&#xD;&#xA;        /posts/2024_fall/assets/1730736611574-682f5fe3-0e26-47e4-827f-df0a709e240d.jpeg&#34;/&gt;&lt;/p&gt;&#xA;&lt;p&gt;OpenWRTä½œä¸ºè½¯è·¯ç”±ï¼Œç”¨SNATç»™PVEé‡Œçš„è™šæ‹Ÿæœºå¼€äº†ä¸€ä¸ªå†…ç½‘ï¼Œè¿™æ ·åœ¨å‡ºç½‘çš„æ—¶å€™éƒ½ç”¨çš„æ˜¯OpenWRTçš„IP-MACã€‚å†…ç½‘è®¾å¤‡é€šè¿‡PVEçš„vmbr1æ¡¥æ¥ç½‘ç»œè¿åœ¨ä¸€èµ·ï¼Œè€Œvmbr0è¿æ¥äº†OpenWRTå’Œç‰©ç†ç½‘å¡ã€‚&lt;/p&gt;&#xA;&lt;p&gt;æ€ä¹ˆä»å¤–éƒ¨ç®¡ç†å†…éƒ¨è™šæ‹Ÿæœºï¼Ÿè¿™é‡Œæˆ‘åœ¨OpenWRTä¸Šè£…äº†ä¸€ä¸ªtailscaleï¼Œå¼€å¯å­ç½‘è½¬å‘ã€‚&lt;/p&gt;&#xA;&lt;p&gt;åšå®¢æ€ä¹ˆå¼„åˆ°å…¬ç½‘ï¼Ÿæˆ‘ä½¿ç”¨äº†cloudflareçš„TUNï¼Œå®ƒç›¸å½“äºä¸€ä¸ªåå‘ä»£ç†ï¼Œå¯ä»¥ç›´æ¥æŠŠ&lt;code&gt;blog.queenbridge.tech&lt;/code&gt;è½¬å‘åˆ°æ¢é’ˆï¼ˆcloudflared containerï¼‰ä¸Šï¼Œç„¶åæ¢é’ˆå‘å†…ç½‘è¯·æ±‚å†å‘ç»™å…¬ç½‘ã€‚&lt;/p&gt;&#xA;&lt;h1 id=&#34;æ­å»ºè¿‡ç¨‹ä¸€äº›å‘&#34;&gt;æ­å»ºè¿‡ç¨‹&amp;amp;&amp;amp;ä¸€äº›å‘&lt;/h1&gt;&#xA;&lt;h2 id=&#34;pve&#34;&gt;PVE&lt;/h2&gt;&#xA;&lt;p&gt;æœ€åŸå§‹çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªæœ‰ä¸€ä¸ªPVEï¼Œå¦‚æœæŒ‰ç…§æœ€ç»ˆçš„æ‹“æ‰‘æˆ‘çš„laptopæ ¹æœ¬æ²¡åŠæ³•è¿ä¸Šç®¡ç†ç«¯å£ã€‚æ‰€ä»¥åœ¨OpenWRTé…ç½®å®Œæˆä¹‹å‰æœ‰ä¸¤ç§åŠæ³•ï¼š&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;æŠŠlaptopå’ŒPVEéƒ½è¿åˆ°äº¤æ¢æœºä¸Šï¼ŒPVEå’Œlaptopçš„æœ‰çº¿å£ç½‘å…³è®¾æˆæ ¡å›­ç½‘çš„ç½‘å…³&lt;/li&gt;&#xA;&lt;li&gt;å¹²è„†æŠŠç›´æ¥laptopå’ŒPVEç”¨ä¸€æ ¹ç½‘çº¿è¿èµ·æ¥&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;é¦–å…ˆç»™PVEæ·»åŠ ä¸¤ä¸ªæ¡¥æ¥ç½‘ç»œï¼Œvmbr0æ¡¥æ¥åˆ°ç‰©ç†æœ‰çº¿ç½‘å¡enp1s0ä¸Šç”¨äºé€šè¿‡äº¤æ¢æœºè¿æ ¡å›­ç½‘ï¼Œvmbr1ç”¨ä½œå†…ç½‘å¹¿æ’­åŸŸã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;&#xD;&#xA;        /posts/2024_fall/assets/1730738897489-a0654c93-faa4-44fe-b458-5ac519891d94.png&#34;/&gt;&lt;/p&gt;&#xA;&lt;p&gt;ç™»å½•PVEï¼Œæœ€ç»ˆ/etc/network/interfacesçš„é…ç½®å¦‚ä¸‹&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-powershell&#34; data-lang=&#34;powershell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;auto lo&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;iface lo inet loopback&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;iface enp1s0 inet manual&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;iface wlp2s0 inet manual&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;auto vmbr0&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;iface vmbr0 inet static&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        address &lt;span style=&#34;color:#bd93f9&#34;&gt;10&lt;/span&gt;.X.X.X/&lt;span style=&#34;color:#bd93f9&#34;&gt;24&lt;/span&gt;  &lt;span style=&#34;color:#6272a4&#34;&gt;# æ ¡å›­ç½‘IP&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;bridge-ports&lt;/span&gt; enp1s0&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;bridge-stp&lt;/span&gt; off&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;bridge-fd&lt;/span&gt; &lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;auto vmbr1&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;iface vmbr1 inet static&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        address &lt;span style=&#34;color:#bd93f9&#34;&gt;192.168&lt;/span&gt;.233.&lt;span style=&#34;color:#bd93f9&#34;&gt;10&lt;/span&gt;/&lt;span style=&#34;color:#bd93f9&#34;&gt;24&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        gateway &lt;span style=&#34;color:#bd93f9&#34;&gt;192.168&lt;/span&gt;.233.1&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        bridge_ports none&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        bridge_stp off&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        bridge_fd &lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;source /etc/network/interfaces.d/*&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç«‹å³ä½¿ç”¨é…ç½®ï¼š&lt;/p&gt;</description>
    </item>
    <item>
      <title>MIT 6.5840(1) - Introduction</title>
      <link>https://blog.kingbridge.one/posts/2024_fall/mit-6.58401/</link>
      <pubDate>Wed, 30 Oct 2024 00:00:00 +0000</pubDate>
      <guid>https://blog.kingbridge.one/posts/2024_fall/mit-6.58401/</guid>
      <description>&lt;p&gt;é‡ç”Ÿä¹‹æˆ‘è¦å­¦ä¹ åˆ†å¸ƒå¼ç³»åˆ—ç¬¬ä¸€ç¯‡ã€‚&lt;/p&gt;&#xA;&lt;p&gt;è¯¾ç¨‹ä¸»é¡µï¼š&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://pdos.csail.mit.edu/6.824/schedule.html&#34;&gt;6.5840 Schedule: Spring 2024&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;æ˜æ˜Ÿè¯¾ç¨‹MIT 6.5840: Distributed Systemsï¼ŒåŸå6.824ï¼Œåœ¨2024å¹´ä¸€å…±å¸ƒç½®äº†5ä¸ªlabã€‚è¿™å‡ ä¸ªlabå¾ªåºæ¸è¿›ï¼Œä»å¤æ³•åˆ†å¸ƒå¼MapReduceæ“èµ·ï¼Œç„¶åæ‰‹æ“raftï¼Œå¹¶æœ€ç»ˆé€ å‡ºç±»ä¼¼TiKVçš„åˆ†å¸ƒå¼æ•°æ®åº“ï¼Œæ•´ä¸ªè¿‡ç¨‹åšä¸‹æ¥çœŸæœ‰ç§å¼€å±€ä¸€æ ¹é’ˆæ‰‹æ“Windowsçš„çˆ½æ„Ÿã€‚&lt;/p&gt;&#xA;&lt;h1 id=&#34;å¦‚ä½•é˜²æ²»åŠ²æ¤ç—…&#34;&gt;å¦‚ä½•é˜²æ²»åŠ²æ¤ç—…&lt;/h1&gt;&#xA;&lt;p&gt;å°±åƒæŸå›½äº§3Aå¤§ä½œçš„ä¹ä¹å…«åä¸€éš¾çš„ç¬¬ä¸€éš¾æ˜¯è§£å‹æ¸¸æˆï¼Œæœ¬è¯¾ç¨‹çš„ç¬¬ä¸€éš¾æ˜¯è®©äººæ†‹å‡ºåŠ²æ¤ç—…çš„æ–‡æ¡£ç½‘é¡µã€‚&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;&#xD;&#xA;        /posts/2024_fall/assets/1730276090038-6c05e18c-4302-47f8-be88-ac49b3f71235.png&#34;/&gt;&lt;/p&gt;&#xA;&lt;p&gt;ç”±äºæ–‡æ¡£å¼¹é“åå·¦ï¼Œè€ƒè™‘åœ¨æ§åˆ¶å°é‡ŒæŠŠå®ƒæ°´å¹³å±…ä¸­ã€‚&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-javascript&#34; data-lang=&#34;javascript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;const&lt;/span&gt; body &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;document&lt;/span&gt;.body;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;body.style.maxWidth &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;800px&amp;#34;&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;body.style.marginLeft &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;auto&amp;#34;&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;body.style.marginRight &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;auto&amp;#34;&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;const&lt;/span&gt; elements &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; body.getElementsByTagName(&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;*&amp;#34;&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;let&lt;/span&gt; i &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt;; i &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt; elements.length; i&lt;span style=&#34;color:#ff79c6&#34;&gt;++&lt;/span&gt;) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    elements[i].style.maxWidth &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;100%&amp;#34;&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    elements[i].style.boxSizing &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;border-box&amp;#34;&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;labå†…å®¹ç®€å•ä»‹ç»&#34;&gt;labå†…å®¹ç®€å•ä»‹ç»&lt;/h1&gt;&#xA;&lt;p&gt;lab1æ˜¯æ¯”è¾ƒç‹¬ç«‹çš„å¼€èƒƒå°èœï¼Œè¦å®ç°ä¸€ä¸ªGoogleæ›¾ç»ä½¿ç”¨çš„MapReduceæ¡†æ¶ã€‚&lt;/p&gt;&#xA;&lt;p&gt;lab2å®ç°ä¸€ä¸ªç®€å•çš„å•ä½“KVæœåŠ¡å™¨ï¼Œè¦æ±‚åœ¨ç½‘ç»œä¸ç¨³å®šçš„æƒ…å†µä¸‹ä¹Ÿèƒ½ä¿è¯æœåŠ¡ä¸å‡ºé”™ã€‚&lt;/p&gt;&#xA;&lt;p&gt;lab3åˆ™æ˜¯å®ç°Raftåè®®ã€‚&lt;/p&gt;&#xA;&lt;p&gt;lab4è¦åŸºäºlab3å®ç°çš„Raftåè®®ï¼Œæ„å»ºä¸€ä¸ªKVæœåŠ¡å™¨é›†ç¾¤ï¼Œä¹Ÿå°±æ˜¯åœ¨lab2çš„åŸºç¡€ä¸Šç”¨Raftåè®®ä¿è¯Fault-tolerantã€‚&lt;/p&gt;&#xA;&lt;p&gt;lab5åˆ™è¦åœ¨lab4çš„åŸºç¡€ä¸Šï¼ŒæŠŠæ•°æ®åº“çš„æ•°æ®åˆ†ä¸ºå‡ ä¸ªåˆ†ç‰‡ï¼ˆshardï¼‰æ¥å‡è½»å•ä¸ªæœåŠ¡å™¨è´Ÿæ‹…ï¼Œéœ€è¦å®ç°ä»–ä»¬çš„æ•°æ®è¿ç§»ã€‚&lt;/p&gt;&#xA;&lt;p&gt;ä¸ªäººè®¤ä¸ºæœ€éš¾å®ç°çš„ä¸¤ä¸ªlabæ˜¾ç„¶æ˜¯lab3å’Œlab5ã€‚lab3éœ€è¦å¯¹Raftçš„åŸå§‹è®ºæ–‡ä»”ç»†ç ”è¯»ï¼Œlab5åˆ™éœ€è¦ä¸€å¼€å§‹å°±è®¾è®¡å¥½æ•´ä¸ªæ¶æ„å¦‚ä½•å®ç°ï¼Œè¾…ä»¥ç½‘ä¸Šæœç´¢ç›¸å…³çš„å®ç°æ€è·¯æ‰å¥½å¼€å§‹ä¸Šæ‰‹ã€‚&lt;/p&gt;&#xA;&lt;h1 id=&#34;debugå°æŠ€å·§&#34;&gt;Debugå°æŠ€å·§&lt;/h1&gt;&#xA;&lt;p&gt;ä¸ªäººè®¤ä¸ºå®ç°è¿™äº›labæœ€æœ‰æŒ‘æˆ˜æ€§çš„åœ°æ–¹ä¸æ˜¯åœ¨è®¾è®¡æˆ–è€…ç¼–å†™ä¸Šï¼Œè€Œæ˜¯debugä¸Šã€‚å› ä¸ºä¼ ç»Ÿçš„æ‰“æ–­ç‚¹debugæ–¹æ³•æ˜¯å¯¹ä¸€ä¸ªå•ä½“åº”ç”¨æ“ä½œï¼Œè€Œæœ¬æ¬¡labéœ€è¦é¢å¯¹çš„æ˜¯ä¸€ä¸ªé›†ç¾¤ç³»ç»Ÿï¼Œæ‰“æ–­ç‚¹çš„æ–¹æ³•å°±å¾ˆéš¾æ“ä½œï¼Œæ‰€ä»¥ä¸»è¦è¿˜æ˜¯é printå¤§æ³•ã€‚é‚£ä¹ˆè®¾è®¡ä¸€ä¸ªå¥½çš„æ‰“å°å‡½æ•°éå¸¸æœ‰å¿…è¦ï¼Œä¾‹å¦‚å¯ä»¥æŠŠæ‰“å°å‡½æ•°æŠ½è±¡å‡ºæ¥ã€‚ä¾‹å¦‚lab5æˆ‘ç”¨äº†è¿™æ ·ä¸€ä¸ªå‡½æ•°å¯¹printlnåŒ…è£…&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;func&lt;/span&gt; (kv &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;ShardKV) &lt;span style=&#34;color:#50fa7b&#34;&gt;SSPrintf&lt;/span&gt;(format &lt;span style=&#34;color:#8be9fd&#34;&gt;string&lt;/span&gt;, a &lt;span style=&#34;color:#ff79c6&#34;&gt;...&lt;/span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;interface&lt;/span&gt;{}) (n &lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt;, err &lt;span style=&#34;color:#8be9fd&#34;&gt;error&lt;/span&gt;) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&lt;span style=&#34;color:#ff79c6&#34;&gt;if&lt;/span&gt; SDebug {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;log.&lt;span style=&#34;color:#50fa7b&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;[server %d]&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;+&lt;/span&gt;format, &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;append&lt;/span&gt;([]&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;interface&lt;/span&gt;{}{kv.gid}, a&lt;span style=&#34;color:#ff79c6&#34;&gt;...&lt;/span&gt;)&lt;span style=&#34;color:#ff79c6&#34;&gt;...&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;kv.gidæ˜¯æ ‡è¯†ShardKVçš„ç›¸å…³ä¿¡æ¯ä¹‹ä¸€ï¼Œå®è·µä¸Šè¿˜å¯ä»¥å¡å…¥æ›´å¤šçš„åŸºæœ¬ä¿¡æ¯ï¼Œå½“ç„¶è¿™å¯èƒ½è¦è€ƒè™‘è·å–è¿™äº›ä¿¡æ¯ä¼šä¸ä¼šé€ æˆè¯»å†™ä¸Šçš„æ¡ä»¶ç«äº‰çš„é—®é¢˜ã€‚&lt;/p&gt;&#xA;&lt;p&gt;æœ¬æ¬¡å®éªŒæˆ‘åªç”¨äº†SDebugæ¥åˆ¤æ–­æ˜¯å¦æ‰“å°æ—¥å¿—ï¼Œä½†å®é™…ä¸Šå¯ä»¥è®¾è®¡ä¸€ä¸ªç±»ä¼¼levelçš„ä¸œè¥¿ï¼Œæ¥æ–¹ä¾¿åŒºåˆ†é‡è¦æ—¥å¿—å’Œä¸é‚£ä¹ˆé‡è¦çš„æ—¥å¿—ã€‚&lt;/p&gt;&#xA;&lt;p&gt;åœ¨éœ€è¦åˆ†æBugæ—¥å¿—çš„æ—¶å€™ï¼Œå¯ä»¥å€ŸåŠ©Linuxçš„teeå‘½ä»¤è®©æ—¥å¿—åŒæ—¶è¾“å‡ºåˆ°stdoutå’Œæ–‡ä»¶é‡Œã€‚&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;go &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;test&lt;/span&gt; -race -run TestConcurrent3_5B | tee bug.txt&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨éœ€è¦è¾“å‡ºæ—¥å¿—çš„åœ°æ–¹å¯ä»¥å¤šåŠ å‡ ä¸ªæ¡ä»¶åˆ¤æ–­ï¼Œç¡®è®¤æ˜¯bugå¯èƒ½å‘ç”Ÿçš„é‚£ç§æ¡ä»¶ï¼Œè¿™æ ·å¯ä»¥å‡å°‘å¤§é‡æ— æ„ä¹‰çš„æ—¥å¿—ã€‚&lt;/p&gt;</description>
    </item>
    <item>
      <title>MIT 6.5840(2) - Lab1 MapReduce</title>
      <link>https://blog.kingbridge.one/posts/2024_fall/mit-6.58402/</link>
      <pubDate>Wed, 30 Oct 2024 00:00:00 +0000</pubDate>
      <guid>https://blog.kingbridge.one/posts/2024_fall/mit-6.58402/</guid>
      <description>&lt;h1 id=&#34;ç†è®º&#34;&gt;ç†è®º&lt;/h1&gt;&#xA;&lt;p&gt;MapReduceä¸»è¦ç”¨æ¥è§£å†³å¤§è§„æ¨¡æ•°æ®å¤„ç†çš„é—®é¢˜ï¼Œå®ƒèƒ½å¤Ÿå°†ä¸€ä¸ªè®¡ç®—ä»»åŠ¡åˆ†è§£ä¸ºè®¸å¤šå°ä»»åŠ¡ï¼Œè¿™äº›å°ä»»åŠ¡å¯ä»¥åœ¨å¤šå°æœºå™¨ä¸Šå¹¶è¡Œæ‰§è¡Œï¼Œä»è€Œå¤§å¤§æé«˜å¤„ç†é€Ÿåº¦å’Œæ•ˆç‡ã€‚&lt;/p&gt;&#xA;&lt;p&gt;å®ƒçš„æ ¸å¿ƒæ€æƒ³å‚è€ƒGoogleè®ºæ–‡ä¸­çš„å›¾ç‰‡&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;&#xD;&#xA;        /posts/2024_fall/assets/1720323199815-9184d63b-4736-412e-bc32-1487718c2c04.png&#34;/&gt;&lt;/p&gt;&#xA;&lt;p&gt;Masterç¨‹åºæ˜¯ä¸»è¦çš„ç¨‹åºï¼Œå®ƒä¼šå°†æ–‡ä»¶ï¼ˆNä¸ªï¼‰åˆ†é…ä¸ªworkerï¼Œæ‰€æœ‰workeræ˜¯å¯¹ç­‰çš„ã€‚workerå°†ä¼šé¦–å…ˆæ‰§è¡ŒMapå‘½ä»¤ï¼Œæ¥å—ä¸€äº›æ–‡ä»¶ï¼Œç„¶åè¾“å‡ºä¸ºé”®å€¼å¯¹å¹¶å†™å…¥Rä¸ªï¼ˆç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰Rçš„å€¼ï¼‰ä¸­é—´æ–‡ä»¶ï¼ˆå›¾ä¸­çš„Intermediate filesï¼‰ã€‚&lt;strong&gt;å½“æ‰€æœ‰Mapä»»åŠ¡å®Œæˆå&lt;/strong&gt;ï¼ŒMasterä¼šç»™workeråˆ†é…Reduceä»»åŠ¡ï¼Œå¯¹ä¸­é—´æ–‡ä»¶è¿›è¡Œå¤„ç†ï¼Œç„¶åç”Ÿæˆæœ€ç»ˆçš„ç»“æœæ–‡ä»¶ã€‚&lt;/p&gt;&#xA;&lt;p&gt;å…¶ä¸­ï¼ŒMapå‡½æ•°å’ŒReduceå‡½æ•°å¯ä»¥ä»¥æ’ä»¶çš„å½¢å¼æä¾›ç»™ç³»ç»Ÿã€‚&lt;/p&gt;&#xA;&lt;p&gt;ä¾‹å¦‚ï¼Œåœ¨Words Countåœºæ™¯ä¸‹ï¼ˆç»Ÿè®¡è‹¥å¹²æ–‡ä»¶é‡Œæ¯ä¸ªç›¸åŒå•è¯çš„æ•°é‡ï¼‰ï¼š&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-plain&#34; data-lang=&#34;plain&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;map(String key, String value):&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    // key: document name&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    // value: document contents&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    for each word w in value:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        EmitIntermediate(w, &amp;#34;1&amp;#34;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;reduce(String key, Iterator values):&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    // key: a word&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    // values: a list of counts&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    int result = 0;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    for each v in values:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        result += ParseInt(v);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    Emit(AsString(result));&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™ä¸ªä¾‹å­ä¸­ï¼Œmapå‡½æ•°å°†ç”Ÿæˆä¸€ç³»åˆ—keyä¸ºwordï¼Œvalueä¸º&amp;quot;1&amp;quot;çš„ä¸­é—´æ–‡ä»¶ï¼Œç„¶åreduceå°†åŒä¸€ä¸ªkeyèšåˆï¼Œç»Ÿè®¡valueçš„æ•°é‡ã€‚&lt;/p&gt;&#xA;&lt;p&gt;è¿™æ ·æˆ‘ä»¬å°±å®ç°äº†æ•°æ®é›†çš„åˆ†å¸ƒå¼å¤„ç†ã€‚&lt;/p&gt;&#xA;&lt;h1 id=&#34;ä»£ç &#34;&gt;ä»£ç &lt;/h1&gt;&#xA;&lt;p&gt;ç³»ç»Ÿçš„å¯åŠ¨æµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;</description>
    </item>
    <item>
      <title>MIT 6.5840(3) - Lab3 Raft</title>
      <link>https://blog.kingbridge.one/posts/2024_fall/mit-6.58403/</link>
      <pubDate>Wed, 30 Oct 2024 00:00:00 +0000</pubDate>
      <guid>https://blog.kingbridge.one/posts/2024_fall/mit-6.58403/</guid>
      <description>&lt;p&gt;ç”±äºLab2æ˜¯ä¸€ä¸ªKVæ•°æ®åº“ï¼Œå’ŒLab3ã€Lab4æ¯”è¾ƒç›¸å…³ï¼Œæ‰€ä»¥ä¹‹åçš„æ–‡ç« ä¼šæŠŠä»–ä»¬æ”¾åœ¨ä¸€èµ·ã€‚è¿™ç¯‡æ–‡ç« å…ˆä»‹ç»Lab3ã€‚&lt;/p&gt;&#xA;&lt;h1 id=&#34;raftç®—æ³•æ¦‚è§ˆèµ„æ–™&#34;&gt;Raftç®—æ³•æ¦‚è§ˆèµ„æ–™&lt;/h1&gt;&#xA;&lt;p&gt;å¯ä»¥å»è¿™ä¸ªç½‘ç«™å¯è§†åŒ–åœ°ç†è§£Raftç®—æ³•&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://thesecretlivesofdata.com/raft/#home&#34;&gt;Raft (thesecretlivesofdata.com)&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;ç®—æ³•å®ç°çš„æ‰€æœ‰ç»†èŠ‚åœ¨raft-extendedè®ºæ–‡ä¸­éƒ½æœ‰æ¸…æ™°çš„é˜è¿°ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚é‡ç‚¹å…³æ³¨figure 2çš„å®ç°é€»è¾‘&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://pdos.csail.mit.edu/6.824/papers/raft-extended.pdf&#34;&gt;pdos.csail.mit.edu/6.824/papers/raft-extended.pdf&lt;/a&gt;&lt;/p&gt;&#xA;&lt;h1 id=&#34;3a-leader-election&#34;&gt;3A: Leader Election&lt;/h1&gt;&#xA;&lt;p&gt;ä¸ºäº†å®ç°Leader Electionï¼Œäº‹å®ä¸Šæˆ‘ä»¬å°±è¦å®ç°Raftä¸­æœ€æ ¸å¿ƒçš„ä¸¤ä¸ªtimingäº†ã€‚æˆ‘æŠŠElectionTimeoutå’ŒbroadcastTimeåˆ†åˆ«ç”¨electionTickerHandlerå’ŒbroadcastTickerHandlerå°è£…ï¼Œä»–ä»¬ç”¨Tickeræ¥æ§åˆ¶ï¼ˆå°½ç®¡è¯¾ç¨‹å»ºè®®ä¸è¦ç”¨Tickerï¼Œä½†å…¶å®ä¹Ÿä¸éš¾å®ç°ï¼‰&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;func&lt;/span&gt; (rf &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;Raft) &lt;span style=&#34;color:#50fa7b&#34;&gt;Ticker&lt;/span&gt;() {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&lt;span style=&#34;color:#ff79c6&#34;&gt;for&lt;/span&gt; rf.&lt;span style=&#34;color:#50fa7b&#34;&gt;killed&lt;/span&gt;() &lt;span style=&#34;color:#ff79c6&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;false&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;&lt;span style=&#34;color:#ff79c6&#34;&gt;select&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;&lt;span style=&#34;color:#ff79c6&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;-&lt;/span&gt;rf.electionTimer.C:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;&#x9;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;&#x9;&#x9;rf.&lt;span style=&#34;color:#50fa7b&#34;&gt;electionTickerHandler&lt;/span&gt;()&lt;span style=&#34;color:#6272a4&#34;&gt;// è¿™ä¸ªå‡½æ•°ä¼šreset timerï¼Œä¸‹åŒ&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;&#x9;&#x9;&#x9;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;&lt;span style=&#34;color:#ff79c6&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;-&lt;/span&gt;rf.broadcastTimer.C:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;&#x9;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;&#x9;&#x9;rf.&lt;span style=&#34;color:#50fa7b&#34;&gt;broadcastTickerHandler&lt;/span&gt;()&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;&#x9;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;// reset timer&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;func&lt;/span&gt; (rf &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;Raft) &lt;span style=&#34;color:#50fa7b&#34;&gt;resetElectionTimeout&lt;/span&gt;() {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&lt;span style=&#34;color:#50fa7b&#34;&gt;resetTimer&lt;/span&gt;(rf.electionTimer, rf.&lt;span style=&#34;color:#50fa7b&#34;&gt;getElectionTimeout&lt;/span&gt;())&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;func&lt;/span&gt; (rf &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;Raft) &lt;span style=&#34;color:#50fa7b&#34;&gt;resetBroadcastTimeout&lt;/span&gt;() {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&lt;span style=&#34;color:#50fa7b&#34;&gt;resetTimer&lt;/span&gt;(rf.broadcastTimer, time.&lt;span style=&#34;color:#50fa7b&#34;&gt;Duration&lt;/span&gt;(broadcastTimeout)&lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;time.Millisecond)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;resetTimer&lt;/span&gt;(timer &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;time.Timer, d time.Duration) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&lt;span style=&#34;color:#ff79c6&#34;&gt;if&lt;/span&gt; !timer.&lt;span style=&#34;color:#50fa7b&#34;&gt;Stop&lt;/span&gt;() {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;&lt;span style=&#34;color:#ff79c6&#34;&gt;select&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;&lt;span style=&#34;color:#ff79c6&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;-&lt;/span&gt;timer.C:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;&lt;span style=&#34;color:#ff79c6&#34;&gt;default&lt;/span&gt;:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;timer.&lt;span style=&#34;color:#50fa7b&#34;&gt;Reset&lt;/span&gt;(d)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;// åˆå§‹åŒ–ï¼š&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;rf.electionTimer = time.&lt;span style=&#34;color:#50fa7b&#34;&gt;NewTimer&lt;/span&gt;(rf.&lt;span style=&#34;color:#50fa7b&#34;&gt;getElectionTimeout&lt;/span&gt;())&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;rf.broadcastTimer = time.&lt;span style=&#34;color:#50fa7b&#34;&gt;NewTimer&lt;/span&gt;(time.&lt;span style=&#34;color:#50fa7b&#34;&gt;Duration&lt;/span&gt;(broadcastTimeout) &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt; time.Millisecond)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;electionTickerHandleræ ¹æ®å½“å‰stateçš„çŠ¶æ€å†³å®šæ˜¯å¦è¦å‘èµ·ç«é€‰&lt;/p&gt;</description>
    </item>
    <item>
      <title>MIT 6.5840(4) - Lab2 &amp; Lab4</title>
      <link>https://blog.kingbridge.one/posts/2024_fall/mit-6.58404/</link>
      <pubDate>Wed, 30 Oct 2024 00:00:00 +0000</pubDate>
      <guid>https://blog.kingbridge.one/posts/2024_fall/mit-6.58404/</guid>
      <description>&lt;h1 id=&#34;lab2-keyvalue-server&#34;&gt;Lab2 Key/Value Server&lt;/h1&gt;&#xA;&lt;p&gt;lab2è¦æ±‚å®ç°ä¸€ä¸ªçº¿æ€§ä¸€è‡´çš„KVæ•°æ®åº“ï¼Œå¯èƒ½ä¼šå­˜åœ¨ä¸ç¨³å®šçš„ç½‘ç»œï¼ˆæ¯”å¦‚é«˜å»¶è¿Ÿã€ä¸¢åŒ…ç­‰æƒ…å†µï¼‰ï¼Œä½†æ˜¯serverä¸ä¼šcrashã€‚&lt;/p&gt;&#xA;&lt;p&gt;éš¾ç‚¹åœ¨äºclientç”±äºè¶…æ—¶é‡ä¼ ï¼ˆç±»ä¼¼äºTCPï¼‰ï¼Œå¯èƒ½ä¼šå‘é€ä¸€ä¸ªè¯·æ±‚å¤šæ¬¡ï¼Œserveræ¥æ”¶åˆ°çš„è¿™äº›é‡å¤è¯·æ±‚ä¹Ÿä¸ä¸€å®šæ˜¯è¿ç»­çš„ã€‚æ­¤æ—¶å°±éœ€è¦serverç»´æŠ¤ä¸€ä¸ªhashMapç”¨äºè®°å½•è¯·æ±‚IDä»¥åŠå¯¹åº”çš„ç¬¬ä¸€æ¬¡æˆåŠŸçš„è¿”å›ç»“æœã€‚&#xA;hashSetæ˜¾ç„¶éœ€è¦åŠæ—¶æ¸…ç†ã€‚æˆ‘é‡‡ç”¨çš„æ–¹æ¡ˆæ˜¯clientåœ¨ç¡®è®¤å‘åŒ…æˆåŠŸåï¼Œç»§ç»­å‘é€æºå¸¦è¯·æ±‚IDçš„ResolveRPCç›´åˆ°æˆåŠŸï¼Œserveré€šè¿‡ResovleRPCæŠŠhashMapä¸­çš„è¯·æ±‚IDåˆ é™¤ã€‚åˆ é™¤æ“ä½œæ˜¯å¹‚ç­‰çš„ï¼Œä¸éœ€è¦ä¿è¯çº¿æ€§ä¸€è‡´ã€‚&#xA;ä¾‹å¦‚ï¼Œä¸€ä¸ªå®Œæ•´çš„PUTè¯·æ±‚å¦‚ä¸‹ï¼š&lt;/p&gt;&#xA;&lt;p&gt;serverç»´æŠ¤done = make(map[int64]string)&lt;/p&gt;&#xA;&lt;p&gt;â— clientå‘é€PUT(x,1)ï¼ŒID=1&lt;/p&gt;&#xA;&lt;p&gt;â— serveråˆ¤æ–­IDæ˜¯å¦å­˜åœ¨äºdoneã€‚å¦‚æœå­˜åœ¨ï¼Œè¿”å›é‡Œé¢çš„å€¼ï¼›å¦åˆ™å¤„ç†å¹¶æŠŠç»“æœå­˜åœ¨doneé‡Œ&lt;/p&gt;&#xA;&lt;p&gt;â— clientæ”¶åˆ°ä¹‹åå‘é€Resolve(1)&lt;/p&gt;&#xA;&lt;p&gt;â— serveræ‰§è¡Œdelete(done, 1)&lt;/p&gt;&#xA;&lt;p&gt;ä¸€æ¬¡ä¸Šè¿°çš„æ“ä½œæ˜¯åŸå­æ€§çš„ã€‚&lt;/p&gt;&#xA;&lt;h1 id=&#34;lab4-fault-tolerant-kvserver&#34;&gt;Lab4 Fault-tolerant KVServer&lt;/h1&gt;&#xA;&lt;p&gt;åŸºäºRAFTåè®®å®ç°ä¸€ä¸ªFault-tolerant KVServer&lt;/p&gt;&#xA;&lt;h2 id=&#34;clientå®ç°&#34;&gt;Clientå®ç°&lt;/h2&gt;&#xA;&lt;p&gt;æ‰€æœ‰çš„è¯»å†™è¯·æ±‚éƒ½å¿…é¡»ç›´æ¥ä»clientå‘é€ç»™leader serverã€‚æœ‰ä¸¤ç§æƒ…å†µclientä¸çŸ¥é“leaderæ˜¯è°ï¼š&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;ç¬¬ä¸€æ¬¡å‘é€è¯·æ±‚&lt;/li&gt;&#xA;&lt;li&gt;serveræ˜“ä¸»/crashï¼Œè¿”å›æŠ¥é”™&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;æ­¤æ—¶clientå°±éœ€è¦ä¸æ–­é‡æ–°å°è¯•å¦ä¸€ä¸ªserverï¼Œç›´åˆ°è¯·æ±‚è¢«æˆåŠŸæ¥æ”¶ã€‚æ³¨æ„åˆ°ä¸åŒçš„å‘½ä»¤æœ‰ç›¸åŒçš„å‘é€æ–¹å¼ï¼Œå¯ä»¥æŠ½è±¡å‡ºä¸€å±‚æ¥ä¸“é—¨ç”¨äºå‘é€RPCï¼Œæˆ‘è¿™é‡Œä½¿ç”¨äº†ç­–ç•¥æ¨¡å¼ã€‚&lt;/p&gt;&#xA;&lt;h2 id=&#34;serverå®ç°&#34;&gt;Serverå®ç°&lt;/h2&gt;&#xA;&lt;h3 id=&#34;å¦‚ä½•è¿”å›rpcç»“æœ&#34;&gt;å¦‚ä½•è¿”å›RPCç»“æœ&lt;/h3&gt;&#xA;&lt;p&gt;å¯¹äºRPCæ¥å—çš„ä¸€ä¸ªOpï¼Œleaderéœ€è¦å°†å®ƒé€šè¿‡Raftçš„Startæ¥å£è¾¾æˆå…±è¯†ã€‚å¯¹äºå†™è¯·æ±‚ï¼ˆGETï¼‰ï¼Œclientåªéœ€è¦çŸ¥é“å®ƒæˆåŠŸå°±è¡Œï¼›å¯¹äºè¯»è¯·æ±‚ï¼ˆPUT/APPENDï¼‰ï¼Œclientè¿˜éœ€è¦çŸ¥é“ç»“æœã€‚&lt;/p&gt;&#xA;&lt;p&gt;æˆ‘ä»¬ç”¨ä¸€ä¸ªä¸“é—¨çš„åç¨‹applierå¾ªç¯è¯»å–Raft commitä¸Šæ¥çš„Opã€‚å¦‚æœæ˜¯è¯»è¯·æ±‚ï¼Œä¸åšå¤„ç†ï¼›å¦‚æœæ˜¯å†™è¯·æ±‚ï¼Œåˆ™æ›´æ–°KVmapã€‚è¿™æ ·æ¯ä¸€ä¸ªOpéƒ½å¯¹åº”ç€ä¸€ä¸ªç‹¬ç«‹çš„commandIndexï¼Œå®šä¹‰ä¸€ä¸ªè¿™æ ·çš„mapï¼š&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;resultChMap &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;map&lt;/span&gt;[&lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt;]&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;chan&lt;/span&gt; opResult&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;RPCåç¨‹ä¸applieråç¨‹é€šè¿‡è¿™ä¸ªmapé‡Œçš„ç®¡é“é€šä¿¡ï¼Œä»¥è¿”å›RPCç»“æœã€‚&lt;/p&gt;&#xA;&lt;p&gt;è¦æ³¨æ„RPCåœ¨è¿”å›ç»“æœåéœ€è¦é”€æ¯å¯¹åº”çš„é€šé“ã€‚&lt;/p&gt;&#xA;&lt;h3 id=&#34;å¹‚ç­‰æ€§è®¾è®¡&#34;&gt;å¹‚ç­‰æ€§è®¾è®¡&lt;/h3&gt;&#xA;&lt;h4 id=&#34;raftå±‚commitindexå¹‚ç­‰&#34;&gt;raftå±‚commitIndexå¹‚ç­‰&lt;/h4&gt;&#xA;&lt;p&gt;raftæœ‰å¯èƒ½æäº¤logè¿‡æ—¶çš„commitIndexï¼Œå› æ­¤è¦æ³¨æ„åœ¨çœŸæ­£applyçš„æ—¶å€™æ·»åŠ å¦‚ä¸‹åˆ¤æ–­&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; msg.CommandIndex &amp;gt; kv.lastApplied&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½†è¿™æ ·å¯èƒ½ä¼šé€ æˆè¿‡æ—¶è¯·æ±‚å¾—ä¸åˆ°channelçš„ä¿¡æ¯è€Œå‘ç”Ÿé˜»å¡ï¼Œæ‰€ä»¥è¿˜éœ€è¦åœ¨RPCå¤„æ·»åŠ timeoutã€‚&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ticker &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; time.&lt;span style=&#34;color:#50fa7b&#34;&gt;NewTicker&lt;/span&gt;(time.&lt;span style=&#34;color:#50fa7b&#34;&gt;Duration&lt;/span&gt;(CHANNEL_TIMEOUT) &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt; time.Millisecond)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;defer&lt;/span&gt; ticker.&lt;span style=&#34;color:#50fa7b&#34;&gt;Stop&lt;/span&gt;()&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;select&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;case&lt;/span&gt; opResult &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;-&lt;/span&gt;ch:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;if&lt;/span&gt; opResult.err &lt;span style=&#34;color:#ff79c6&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        reply.Err = &lt;span style=&#34;color:#50fa7b&#34;&gt;Err&lt;/span&gt;(opResult.err)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;-&lt;/span&gt;ticker.C:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    reply.Err = NOTALEADER&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;clientè¯·æ±‚å¹‚ç­‰&#34;&gt;clientè¯·æ±‚å¹‚ç­‰&lt;/h4&gt;&#xA;&lt;p&gt;ç”±äºç½‘ç»œæ•…éšœç­‰åŸå› ï¼Œserveræ¥æ”¶åˆ°çš„å‘½ä»¤å¯èƒ½æ˜¯é‡å¤çš„ï¼Œå¹¶ä¸”clientåªè®¤æœ€æ–°ç»“æœï¼ˆè¿™å’ŒTCPè¶…æ—¶é‡ä¼ æœ‰æ‰€å·®å¼‚ï¼‰ã€‚å¯¹äºè¯»è¯·æ±‚ï¼Œå¹¶ä¸ä¼šä½¿å¾—KVmapçŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼›ä½†æ˜¯å¯¹äºå†™è¯·æ±‚ï¼Œå°±å¿…é¡»ä¿è¯å®ƒçš„å¹‚ç­‰æ€§ã€‚&lt;/p&gt;</description>
    </item>
    <item>
      <title>MIT 6.5840(5) - Lab5 Sharded KeyValue Service</title>
      <link>https://blog.kingbridge.one/posts/2024_fall/mit-6.58405/</link>
      <pubDate>Wed, 30 Oct 2024 00:00:00 +0000</pubDate>
      <guid>https://blog.kingbridge.one/posts/2024_fall/mit-6.58405/</guid>
      <description>&lt;h2 id=&#34;font-stylecolorrgb0-0-0æ¶æ„æ€»è§ˆfont&#34;&gt;&lt;!-- raw HTML omitted --&gt;æ¶æ„æ€»è§ˆ&lt;!-- raw HTML omitted --&gt;&lt;/h2&gt;&#xA;&lt;p&gt;Lab5åœ¨KVRaftçš„åŸºç¡€ä¸Šå®ç°äº†æ•°æ®çš„åˆ†å¸ƒå¼å­˜å‚¨ï¼ŒæŠŠå…¨é‡æ•°æ®åˆ†æˆä¸€ä¸ªä¸ª&amp;quot;Shard&amp;quot;ï¼Œåˆ†åˆ«å­˜å‚¨åœ¨ä¸åŒçš„Groupé‡Œï¼Œæ¯ä¸ªGroupæ˜¯ä¸€ç¾¤Rafté›†ç¾¤ï¼Œè¿™äº›Groupé‡Œçš„æœåŠ¡å™¨å¯ä»¥é€šè¿‡å¤–éƒ¨APIå®æ—¶è°ƒæ•´ä»–ä»¬çš„åŠ å…¥ã€é€€å‡ºã€‚&lt;/p&gt;&#xA;&lt;p&gt;ä¸‹é¢è¿™å¼ å›¾æè¿°äº†ShardKVçš„æ¶æ„&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;&#xD;&#xA;        /posts/2024_fall/assets/1730270544444-d1c43a0e-510d-4208-ac45-4ac8184a4497-1730303201535-3-1730303541114-3.png&#34;/&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;!-- raw HTML omitted --&gt;ä¸€äº›è¡¥å……ï¼š&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;æ¯ä¸ªGroupä¹‹é—´å”¯ä¸€çš„é€šä¿¡æ˜¯Shard Migrationï¼Œå’ŒRaftæ— å…³ï¼Œè€Œä¸€ä¸ªGroupçš„å†…éƒ¨å‡ ä¸ªServerå½¢æˆä¸€ä¸ªRafté›†ç¾¤&lt;/li&gt;&#xA;&lt;li&gt;Group Né‡Œçš„KVServer 1æ˜¯å½“å‰Groupçš„raft leaderï¼Œå…¶ä½™æ˜¯followerã€‚å½“Clientè¯·æ±‚KVServerçš„æ—¶å€™ï¼Œä¼šåƒKVRafté‚£æ ·éå†è¿™äº›KVServerï¼Œç›´åˆ°æ‰¾åˆ°Leader&lt;/li&gt;&#xA;&lt;li&gt;Configçš„å®šä¹‰å¦‚ä¸‹ï¼š&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;type&lt;/span&gt; Config &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;struct&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    Num    &lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt;              &lt;span style=&#34;color:#6272a4&#34;&gt;// config number&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;    Shards [NShards]&lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt;     &lt;span style=&#34;color:#6272a4&#34;&gt;// shardId -&amp;gt; gid&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;    Groups &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;map&lt;/span&gt;[&lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt;][]&lt;span style=&#34;color:#8be9fd&#34;&gt;string&lt;/span&gt; &lt;span style=&#34;color:#6272a4&#34;&gt;// gid -&amp;gt; servers[]&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&#xA;&lt;li&gt;&amp;ldquo;Shard&amp;rdquo;ï¼Œæ˜¯ç”±Keyå”¯ä¸€ç¡®å®šçš„ï¼Œè¯¾ç¨‹ä»£ç é‡Œç»™çš„è½¬æ¢æ–¹å¼æ˜¯ï¼š&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;key2shard&lt;/span&gt;(key &lt;span style=&#34;color:#8be9fd&#34;&gt;string&lt;/span&gt;) &lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;shard &lt;span style=&#34;color:#ff79c6&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&lt;span style=&#34;color:#ff79c6&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;len&lt;/span&gt;(key) &amp;gt; &lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&#x9;shard = &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;int&lt;/span&gt;(key[&lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt;])&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;shard &lt;span style=&#34;color:#ff79c6&#34;&gt;%=&lt;/span&gt; shardctrler.NShards&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#x9;&lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; shard&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;5a-shardctrler&#34;&gt;5A shardctrler&lt;/h2&gt;&#xA;&lt;p&gt;éœ€è¦å®ç°è¿™å‡ ä¸ªæ¥å£ï¼šJoin/Leave/Move/Queryã€‚&lt;/p&gt;</description>
    </item>
    <item>
      <title>åˆ©ç”¨Github Actionsç”ŸæˆCodeQLæ•°æ®åº“</title>
      <link>https://blog.kingbridge.one/posts/2024_fall/git-actions-codeql/</link>
      <pubDate>Thu, 28 Mar 2024 00:00:00 +0000</pubDate>
      <guid>https://blog.kingbridge.one/posts/2024_fall/git-actions-codeql/</guid>
      <description>&lt;p&gt;&lt;strong&gt;åˆ©ç”¨Github Actionsç”ŸæˆCodeQLæ•°æ®åº“ &amp;ndash; ä»¥AliyunCTF2024 Chain17çš„ååºåˆ—åŒ–é“¾æŒ–æ˜ä¸ºä¾‹&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;h1 id=&#34;èƒŒæ™¯&#34;&gt;èƒŒæ™¯&lt;/h1&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.blog/2022-08-15-the-next-step-for-lgtm-com-github-code-scanning/&#34;&gt;lgtm&lt;/a&gt;ç¤¾åŒºåœ¨2022å¹´å…³é—­åï¼ŒCodeQLåªèƒ½åœ¨æœ¬åœ°æ‰‹åŠ¨æ„å»ºï¼Œlgtmåˆ™è¢«æ•´åˆè¿›äº†&lt;a href=&#34;https://docs.github.com/en/code-security/code-scanning/introduction-to-code-scanning/about-code-scanning&#34;&gt;Github Code Scanning&lt;/a&gt;ä¸­ã€‚&lt;/p&gt;&#xA;&lt;p&gt;å¯ä»¥åœ¨Github Actionä¸­ä½¿ç”¨&lt;code&gt;github/codeql-action&lt;/code&gt;æ¥ç”¨å®˜æ–¹æä¾›çš„querieså¯¹repositoryçš„ä»£ç è¿›è¡Œæ‰«æï¼Œç»“æœä¼šæ˜¾ç¤ºä¸ºCode Scanning Alertsã€‚å®˜æ–¹æ–‡æ¡£è¿˜æåˆ°ï¼Œå¯ä»¥è‡ªå®šä¹‰QLè¯­å¥ã€‚ä½†æ˜¯é„™äººæ ¹æ®å®˜æ–¹æ–‡æ¡£çš„é…ç½®å°è¯•å¤šæ¬¡åå¹¶ä¸è®¤ä¸ºå¯ä»¥è‡ªå®šä¹‰queriesï¼ˆï¼ˆ&lt;/p&gt;&#xA;&lt;p&gt;ä½†æ˜¯ï¼Œå¯ä»¥ç»“åˆ&lt;code&gt;actions/upload-artifact&lt;/code&gt;è¿™ä¸ªactionå°†æ„å»ºå¥½çš„CodeQLæ•°æ®åº“å¯¼å‡ºï¼Œç„¶ååœ¨æœ¬åœ°å¯¼å…¥ï¼Œæœ¬åœ°æŸ¥è¯¢ã€‚&lt;/p&gt;&#xA;&lt;p&gt;è€ŒCodeQLæ•°æ®åº“çš„ç”Ÿæˆéœ€è¦æ­£ç¡®çš„ç¼–è¯‘ã€‚å¹¸è¿çš„æ˜¯ï¼Œgithub code scanningä¸ºæˆ‘ä»¬æä¾›äº†è‡ªåŠ¨è¯†åˆ«ç¼–è¯‘è„šæœ¬çš„åŠŸèƒ½ã€‚&lt;/p&gt;&#xA;&lt;p&gt;å¦å¤–ï¼ŒPublic repositoryçš„Actionsæ˜¯å…è´¹çš„ï¼ŒPrivate repositoryæœ‰å…è´¹é¢åº¦ã€‚å®æˆ˜ä¸­æˆ‘ä»¬forkå®˜æ–¹çš„repositoryå³å¯ã€‚&lt;/p&gt;&#xA;&lt;h1 id=&#34;é¢˜ç›®èƒŒæ™¯&#34;&gt;é¢˜ç›®èƒŒæ™¯&lt;/h1&gt;&#xA;&lt;p&gt;é¢˜ç›®ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œagentå’Œserverï¼Œéƒ½æ˜¯old-fashionçš„ååºåˆ—åŒ–å…¥å£ã€‚é¢˜ç›®çš„æµç¨‹ä¸å†èµ˜è¿°ï¼Œå¯ä»¥ç§»æ­¥&lt;a href=&#34;https://xz.aliyun.com/t/14190&#34;&gt;å®˜æ–¹WP&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;è¿™é‡Œè¯´ä¸€ä¸‹æ€è·¯&lt;/p&gt;&#xA;&lt;h2 id=&#34;agent&#34;&gt;agent&lt;/h2&gt;&#xA;&lt;p&gt;å·²çŸ¥&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Hessianååºåˆ—åŒ–Mapçš„æ—¶å€™ä¼šè°ƒç”¨Map.put&lt;/li&gt;&#xA;&lt;li&gt;cn.hutool.json.JSONObject#put(&amp;ldquo;foo&amp;rdquo;, AtomicReference) -&amp;gt; AtomicReference#toStringï¼Œæ³¨æ„AtomicReferenceæ˜¯JDKçš„å†…éƒ¨ç±»æ‰èƒ½è°ƒç”¨toStringï¼Œå¦åˆ™ä¼šæ ¹æ®å±æ€§è°ƒç”¨getter&lt;/li&gt;&#xA;&lt;li&gt;POJONode.toString -&amp;gt; Bean.getObject&lt;/li&gt;&#xA;&lt;li&gt;Bean.getObjectè¿”å›objectåï¼Œjacksonä¼šè°ƒç”¨objectçš„æ‰€æœ‰getterï¼ˆæ ¹æ®getteråå­—ï¼‰&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;æ‰€ä»¥å°±éœ€è¦æ‰¾ä¸€æ¡getter2RCEçš„é“¾å­å¹¶ç»•è¿‡é»‘åå•ã€‚ç»™äº†h2ä¾èµ–ï¼Œå®¹æ˜“æƒ³åˆ°&lt;a href=&#34;https://su18.org/post/jdbc-connection-url-attack/#h2-rce&#34;&gt;JDBC Connection URL Attack | ç´ åå…« (su18.org)&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;ä¹Ÿå°±æ˜¯éœ€è¦å¯»æ‰¾hutoolåº“ä¸­getter -&amp;gt; DriverManager.getConnectionçš„é“¾å­&lt;/p&gt;&#xA;&lt;h2 id=&#34;server&#34;&gt;server&lt;/h2&gt;&#xA;&lt;p&gt;å·²çŸ¥&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;XString#toString -&amp;gt; POJONode#toString -&amp;gt; getter&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;éœ€è¦æ‰¾jOOQåº“ä¸­getter -&amp;gt; RCEçš„é“¾å­&lt;/p&gt;&#xA;&lt;h1 id=&#34;hacking-with-github-actions&#34;&gt;Hacking With Github Actions&lt;/h1&gt;&#xA;&lt;h2 id=&#34;agent-1&#34;&gt;agent&lt;/h2&gt;&#xA;&lt;h3 id=&#34;äº‘ç¼–è¯‘&#34;&gt;äº‘ç¼–è¯‘&lt;/h3&gt;&#xA;&lt;p&gt;forkä»“åº“&lt;a href=&#34;https://github.com/dromara/hutool&#34;&gt;dromara/hutool: ğŸ¬A set of tools that keep Java sweet. (github.com)&lt;/a&gt;&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
